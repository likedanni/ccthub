<!-- pages/profile/profile.wxml -->
<view class="profile-page">
  <!-- 用户信息卡片 -->
  <view class="user-card">
    <view class="user-bg"></view>
    
    <view class="user-info">
      <!-- 用户头像 -->
      <view class="avatar-section">
        <image 
          class="user-avatar" 
          src="{{userInfo.avatar || '/images/icons/default-avatar.png'}}" 
          mode="aspectFill"
          bindtap="editAvatar"
        />
        <view class="edit-icon" bindtap="editAvatar">
          <image src="/images/icons/edit.png" mode="aspectFit"></image>
        </view>
      </view>
      
      <!-- 用户信息 -->
      <view class="user-details">
        <view class="name-row">
          <input 
            class="user-name-input" 
            value="{{userInfo.name || '用户昵称'}}" 
            placeholder="用户昵称" 
            placeholder-class="user-name-placeholder"
            maxlength="20"
            bindinput="onNameInput"
            bindblur="onNameBlur"
            bindconfirm="onNameConfirm"
            cursor-spacing="12"
          />
          <view class="member-tag">
            <image class="member-icon" src="/images/icons/crown.png" mode="aspectFit"></image>
            <text>黄金会员</text>
          </view>
        </view>
        
        <view class="user-stats">
          <view class="stat-item">
            <text class="stat-label">积分</text>
            <text class="stat-value">{{userInfo.points || '0'}}</text>
          </view>
          <view class="stat-divider"></view>
          <view class="stat-item">
            <text class="stat-label">余额</text>
            <text class="stat-value">￥{{userInfo.balance || '00.00'}}</text>
          </view>
        </view>
      </view>
    </view>
    
    <!-- 成长值进度条 -->
          <view class="growth-section">
            <view class="growth-header">
              <text class="growth-label">成长值</text>
              <text class="growth-tip">{{growthTip}}</text>
            </view>
            <view class="progress-bar">
              <view class="progress-fill" style="width: {{growthProgress}}%"></view>
            </view>
          </view>
  </view>

  <!-- 我的订单 -->
  <view class="order-section">
    <view class="section-header">
      <text class="section-title">我的订单</text>
    </view>
    
    <view class="order-grid">
      <view class="order-item" bindtap="viewOrders" data-type="all">
        <view class="order-icon">
          <image src="/images/icons/orders-all.png" mode="aspectFit"></image>
        </view>
        <text class="order-label">全部订单</text>
      </view>
      
      <view class="order-item" bindtap="viewOrders" data-type="ticket">
        <view class="order-icon">
          <image src="/images/icons/ticket.png" mode="aspectFit"></image>
        </view>
        <text class="order-label">票务订单</text>
        <view class="badge" wx:if="{{unreadTicketCount > 0}}">{{unreadTicketCount}}</view>
      </view>
      
      <view class="order-item" bindtap="viewOrders" data-type="product">
        <view class="order-icon">
          <image src="/images/icons/shopping.png" mode="aspectFit"></image>
        </view>
        <text class="order-label">商品订单</text>
        <view class="badge" wx:if="{{unreadProductCount > 0}}">{{unreadProductCount}}</view>
      </view>
      
      <view class="order-item" bindtap="viewOrders" data-type="activity">
        <view class="order-icon">
          <image src="/images/icons/event.png" mode="aspectFit"></image>
        </view>
        <text class="order-label">活动订单</text>
      </view>
    </view>
  </view>

  <!-- 分割线 -->
  <view class="divider"></view>

  <!-- 我的服务 -->
  <view class="service-section">
    <text class="section-title">我的服务</text>
    
    <view class="service-list">
      <view class="service-item" bindtap="navigateToVisitors">
        <view class="service-icon yellow">
          <image src="/images/icons/group.png" mode="aspectFit"></image>
        </view>
        <text class="service-label">常用游客</text>
        <image class="service-arrow" src="/images/icons/arrow-right.png" mode="aspectFit"></image>
      </view>

      <view class="service-item" bindtap="navigateToLocation">
        <view class="service-icon yellow">
          <image src="/images/icons/location_on_FBC02D.png" mode="aspectFit"></image>
        </view>
        <text class="service-label">地址管理</text>
        <image class="service-arrow" src="/images/icons/arrow-right.png" mode="aspectFit"></image>
      </view>

      
      <view class="service-item" bindtap="navigateToReviews">
        <view class="service-icon yellow">
          <image src="/images/icons/review.png" mode="aspectFit"></image>
        </view>
        <text class="service-label">评价反馈</text>
        <image class="service-arrow" src="/images/icons/arrow-right.png" mode="aspectFit"></image>
      </view>
      
      <view class="service-item" bindtap="navigateToFeedback">
        <view class="service-icon teal">
          <image src="/images/icons/feedback.png" mode="aspectFit"></image>
        </view>
        <text class="service-label">我的反馈</text>
        <image class="service-arrow" src="/images/icons/arrow-right.png" mode="aspectFit"></image>
      </view>
      
      <view class="service-item" bindtap="contactCustomerService">
        <view class="service-icon red">
          <image src="/images/icons/support.png" mode="aspectFit"></image>
        </view>
        <text class="service-label">联系客服</text>
        <image class="service-arrow" src="/images/icons/arrow-right.png" mode="aspectFit"></image>
      </view>
      
      <view class="service-item" bindtap="navigateToHelp">
        <view class="service-icon gray">
          <image src="/images/icons/help.png" mode="aspectFit"></image>
        </view>
        <text class="service-label">帮助中心</text>
        <image class="service-arrow" src="/images/icons/arrow-right.png" mode="aspectFit"></image>
      </view>
      
      <view class="service-item" bindtap="navigateToSettings">
        <view class="service-icon gray">
          <image src="/images/icons/settings.png" mode="aspectFit"></image>
        </view>
        <text class="service-label">设置</text>
        <image class="service-arrow" src="/images/icons/arrow-right.png" mode="aspectFit"></image>
      </view>
    </view>
  </view>

  <!-- 退出按钮 -->
  <view class="logout-section">
    <button class="logout-btn" bindtap="logout">安全退出</button>
  </view>
</view>

import{_ as b,r as m,a as V,c as k,o as x,b as o,w as s,d as t,u as I,e as L,f as q,g,E as _}from"./index-CnV6pd1g.js";import{r as z}from"./request-Bjar9GtG.js";const B=d=>z.post("/users/login",{...d,isAdminLogin:!0}),C={class:"login-container"},E={__name:"Login",setup(d){const f=I(),i=m(null),l=m(!1),r=V({phone:"",password:""}),w={phone:[{required:!0,message:"请输入手机号",trigger:"blur"},{pattern:/^1[3-9]\d{9}$/,message:"请输入正确的手机号",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,message:"密码长度不能少于6位",trigger:"blur"}]},p=async()=>{try{if(!await i.value.validate())return;l.value=!0;const e=await B(r);localStorage.setItem("token",e.accessToken),localStorage.setItem("userId",e.userId),_.success("登录成功"),f.push("/dashboard")}catch(a){_.error(a.message||"登录失败")}finally{l.value=!1}};return(a,e)=>{const c=t("el-input"),n=t("el-form-item"),h=t("el-button"),v=t("el-form"),y=t("el-card");return x(),k("div",C,[o(y,{class:"login-card"},{header:s(()=>[...e[2]||(e[2]=[g("h2",null,"长治文旅大生态服务平台",-1),g("p",null,"管理后台登录",-1)])]),default:s(()=>[o(v,{model:r,rules:w,ref_key:"loginFormRef",ref:i},{default:s(()=>[o(n,{prop:"phone"},{default:s(()=>[o(c,{modelValue:r.phone,"onUpdate:modelValue":e[0]||(e[0]=u=>r.phone=u),placeholder:"请输入手机号","prefix-icon":"Phone",size:"large"},null,8,["modelValue"])]),_:1}),o(n,{prop:"password"},{default:s(()=>[o(c,{modelValue:r.password,"onUpdate:modelValue":e[1]||(e[1]=u=>r.password=u),type:"password",placeholder:"请输入密码","prefix-icon":"Lock",size:"large","show-password":"",onKeyup:L(p,["enter"])},null,8,["modelValue"])]),_:1}),o(n,null,{default:s(()=>[o(h,{type:"primary",size:"large",style:{width:"100%"},loading:l.value,onClick:p},{default:s(()=>[...e[3]||(e[3]=[q(" 登录 ",-1)])]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])]),_:1})])}}},R=b(E,[["__scopeId","data-v-4242c16b"]]);export{R as default};

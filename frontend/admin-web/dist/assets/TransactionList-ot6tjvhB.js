import{_ as D,r as b,C as U,h as B,c as N,o as S,b as e,w as a,d as s,f as c,t as p,g as _,G as j}from"./index-D83cRL-0.js";const q={class:"points-transaction-list"},A={class:"points-balance"},L={__name:"TransactionList",setup(M){const f=U(),o=b({userId:f.query.userId||"",source:"",changeType:null,status:null}),g=b([]),r=b({page:1,size:10,total:0}),y={order_pay:"订单支付",daily_checkin:"每日签到",invite:"邀请好友",exchange:"积分兑换",admin_adjust:"后台调整"},V=m=>y[m]||m,d=()=>{console.log("搜索条件:",o.value),g.value=[],r.value.total=0},I=()=>{o.value={userId:f.query.userId||"",source:"",changeType:null,status:null},d()};return B(()=>{d()}),(m,t)=>{const x=s("el-input"),i=s("el-form-item"),u=s("el-option"),v=s("el-select"),w=s("el-button"),z=s("el-form"),n=s("el-table-column"),h=s("el-tag"),T=s("el-table"),C=s("el-pagination"),k=s("el-card");return S(),N("div",q,[e(k,null,{header:a(()=>[...t[6]||(t[6]=[_("div",{class:"card-header"},[_("span",null,"积分流水")],-1)])]),default:a(()=>[e(z,{inline:!0,model:o.value,class:"search-form"},{default:a(()=>[e(i,{label:"用户ID"},{default:a(()=>[e(x,{modelValue:o.value.userId,"onUpdate:modelValue":t[0]||(t[0]=l=>o.value.userId=l),placeholder:"请输入用户ID",clearable:""},null,8,["modelValue"])]),_:1}),e(i,{label:"积分来源"},{default:a(()=>[e(v,{modelValue:o.value.source,"onUpdate:modelValue":t[1]||(t[1]=l=>o.value.source=l),placeholder:"请选择来源",clearable:""},{default:a(()=>[e(u,{label:"订单支付",value:"order_pay"}),e(u,{label:"每日签到",value:"daily_checkin"}),e(u,{label:"邀请好友",value:"invite"}),e(u,{label:"积分兑换",value:"exchange"}),e(u,{label:"后台调整",value:"admin_adjust"})]),_:1},8,["modelValue"])]),_:1}),e(i,{label:"变动类型"},{default:a(()=>[e(v,{modelValue:o.value.changeType,"onUpdate:modelValue":t[2]||(t[2]=l=>o.value.changeType=l),placeholder:"请选择类型",clearable:""},{default:a(()=>[e(u,{label:"增加",value:1}),e(u,{label:"减少",value:2})]),_:1},8,["modelValue"])]),_:1}),e(i,{label:"状态"},{default:a(()=>[e(v,{modelValue:o.value.status,"onUpdate:modelValue":t[3]||(t[3]=l=>o.value.status=l),placeholder:"请选择状态",clearable:""},{default:a(()=>[e(u,{label:"有效",value:1}),e(u,{label:"无效",value:0})]),_:1},8,["modelValue"])]),_:1}),e(i,null,{default:a(()=>[e(w,{type:"primary",onClick:d},{default:a(()=>[...t[7]||(t[7]=[c("查询",-1)])]),_:1}),e(w,{onClick:I},{default:a(()=>[...t[8]||(t[8]=[c("重置",-1)])]),_:1})]),_:1})]),_:1},8,["model"]),e(T,{data:g.value,border:"",style:{width:"100%"}},{default:a(()=>[e(n,{prop:"id",label:"流水ID",width:"80"}),e(n,{prop:"userId",label:"用户ID",width:"100"}),e(n,{prop:"changeType",label:"变动类型",width:"100"},{default:a(l=>[e(h,{type:l.row.changeType===1?"success":"warning"},{default:a(()=>[c(p(l.row.changeType===1?"增加":"减少"),1)]),_:2},1032,["type"])]),_:1}),e(n,{prop:"source",label:"来源",width:"120"},{default:a(l=>[c(p(V(l.row.source)),1)]),_:1}),e(n,{prop:"points",label:"变动积分",width:"100"},{default:a(l=>[_("span",{class:j(l.row.points>=0?"points-positive":"points-negative")},p(l.row.points>=0?"+":"")+p(l.row.points),3)]),_:1}),e(n,{prop:"currentBalance",label:"变动后余额",width:"120"},{default:a(l=>[_("span",A,p(l.row.currentBalance),1)]),_:1}),e(n,{prop:"orderNo",label:"订单号",width:"180","show-overflow-tooltip":""}),e(n,{prop:"expiresAt",label:"过期时间",width:"160"}),e(n,{prop:"status",label:"状态",width:"80"},{default:a(l=>[e(h,{type:l.row.status===1?"success":"info"},{default:a(()=>[c(p(l.row.status===1?"有效":"无效"),1)]),_:2},1032,["type"])]),_:1}),e(n,{prop:"remark",label:"备注","min-width":"150","show-overflow-tooltip":""}),e(n,{prop:"createdAt",label:"创建时间",width:"160"})]),_:1},8,["data"]),e(C,{"current-page":r.value.page,"onUpdate:currentPage":t[4]||(t[4]=l=>r.value.page=l),"page-size":r.value.size,"onUpdate:pageSize":t[5]||(t[5]=l=>r.value.size=l),total:r.value.total,"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",onSizeChange:d,onCurrentChange:d,style:{"margin-top":"20px","justify-content":"flex-end"}},null,8,["current-page","page-size","total"])]),_:1})])}}},E=D(L,[["__scopeId","data-v-2193ff50"]]);export{E as default};

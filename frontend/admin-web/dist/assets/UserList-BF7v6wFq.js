import{a as q,b as H,u as J}from"./user-Du7o-e3J.js";import{_ as K,r as y,a as L,h as Q,c as W,o as u,b as l,w as t,d as o,E as V,i as X,j as Y,f as a,k as p,t as s,g as S,l as ee,m as te}from"./index-DU3ipqWQ.js";import"./request-CQPK_14F.js";const le={class:"user-list"},ae={class:"card-header"},ne={__name:"UserList",setup(oe){const C=y(!1),v=y(!1),i=y(null),m=L({phone:"",status:""}),f=L({page:1,pageSize:10,total:0}),E=y([]),g=async()=>{C.value=!0;try{const d={page:f.page-1,pageSize:f.pageSize,phone:m.phone||void 0,status:m.status||void 0},e=await q(d);E.value=e.content,f.total=e.total}catch(d){V.error("获取用户列表失败"),console.error(d)}finally{C.value=!1}},w=()=>{f.page=1,g()},x=()=>{m.phone="",m.status="",w()},h=()=>{g()},U=async d=>{try{const e=await H(d.id);i.value=e,v.value=!0}catch{V.error("获取用户详情失败")}},A=async d=>{const e=d.status==="ACTIVE"?"禁用":"启用",k=d.status==="ACTIVE"?"INACTIVE":"ACTIVE";try{await te.confirm(`确定要${e}该用户吗?`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),await J(d.id,k),V.success(`${e}成功`),g()}catch(I){I!=="cancel"&&V.error(`${e}失败`)}},B=()=>{g()},D=()=>{g()};return Q(()=>{g()}),(d,e)=>{const k=o("Refresh"),I=o("el-icon"),b=o("el-button"),N=o("el-input"),T=o("el-form-item"),z=o("el-option"),P=o("el-select"),R=o("el-form"),_=o("el-table-column"),c=o("el-tag"),$=o("el-table"),M=o("el-pagination"),j=o("el-card"),r=o("el-descriptions-item"),O=o("el-descriptions"),F=o("el-dialog"),G=X("loading");return u(),W("div",le,[l(j,null,{header:t(()=>[S("div",ae,[e[7]||(e[7]=S("span",null,"用户列表",-1)),l(b,{type:"primary",onClick:h},{default:t(()=>[l(I,null,{default:t(()=>[l(k)]),_:1}),e[6]||(e[6]=a(" 刷新 ",-1))]),_:1})])]),default:t(()=>[l(R,{inline:!0,model:m,class:"search-form"},{default:t(()=>[l(T,{label:"手机号"},{default:t(()=>[l(N,{modelValue:m.phone,"onUpdate:modelValue":e[0]||(e[0]=n=>m.phone=n),placeholder:"请输入手机号",clearable:""},null,8,["modelValue"])]),_:1}),l(T,{label:"状态"},{default:t(()=>[l(P,{modelValue:m.status,"onUpdate:modelValue":e[1]||(e[1]=n=>m.status=n),placeholder:"请选择状态",clearable:""},{default:t(()=>[l(z,{label:"激活",value:"ACTIVE"}),l(z,{label:"禁用",value:"INACTIVE"})]),_:1},8,["modelValue"])]),_:1}),l(T,null,{default:t(()=>[l(b,{type:"primary",onClick:w},{default:t(()=>[...e[8]||(e[8]=[a("搜索",-1)])]),_:1}),l(b,{onClick:x},{default:t(()=>[...e[9]||(e[9]=[a("重置",-1)])]),_:1})]),_:1})]),_:1},8,["model"]),Y((u(),p($,{data:E.value,border:"",stripe:""},{default:t(()=>[l(_,{prop:"id",label:"ID",width:"80"}),l(_,{prop:"phone",label:"手机号",width:"130"}),l(_,{prop:"nickname",label:"昵称",width:"120"}),l(_,{label:"会员等级",width:"100"},{default:t(({row:n})=>[n.memberLevel==="BRONZE"?(u(),p(c,{key:0,type:"info"},{default:t(()=>[...e[10]||(e[10]=[a("青铜",-1)])]),_:1})):n.memberLevel==="SILVER"?(u(),p(c,{key:1},{default:t(()=>[...e[11]||(e[11]=[a("白银",-1)])]),_:1})):n.memberLevel==="GOLD"?(u(),p(c,{key:2,type:"warning"},{default:t(()=>[...e[12]||(e[12]=[a("黄金",-1)])]),_:1})):n.memberLevel==="PLATINUM"?(u(),p(c,{key:3,type:"danger"},{default:t(()=>[...e[13]||(e[13]=[a("铂金",-1)])]),_:1})):n.memberLevel==="DIAMOND"?(u(),p(c,{key:4,type:"danger"},{default:t(()=>[...e[14]||(e[14]=[a("钻石",-1)])]),_:1})):(u(),p(c,{key:5,type:"info"},{default:t(()=>[a(s(n.memberLevel),1)]),_:2},1024))]),_:1}),l(_,{prop:"totalPoints",label:"积分",width:"100"}),l(_,{label:"钱包余额(元)",width:"120"},{default:t(({row:n})=>[a(" ¥"+s(n.walletBalance||"0.00"),1)]),_:1}),l(_,{label:"状态",width:"80"},{default:t(({row:n})=>[n.status==="ACTIVE"?(u(),p(c,{key:0,type:"success"},{default:t(()=>[...e[15]||(e[15]=[a("激活",-1)])]),_:1})):(u(),p(c,{key:1,type:"danger"},{default:t(()=>[...e[16]||(e[16]=[a("禁用",-1)])]),_:1}))]),_:1}),l(_,{prop:"registerTime",label:"注册时间",width:"180"}),l(_,{label:"操作",fixed:"right",width:"150"},{default:t(({row:n})=>[l(b,{type:"primary",size:"small",onClick:Z=>U(n)},{default:t(()=>[...e[17]||(e[17]=[a("查看",-1)])]),_:1},8,["onClick"]),l(b,{type:n.status==="ACTIVE"?"danger":"success",size:"small",onClick:Z=>A(n)},{default:t(()=>[a(s(n.status==="ACTIVE"?"禁用":"启用"),1)]),_:2},1032,["type","onClick"])]),_:1})]),_:1},8,["data"])),[[G,C.value]]),l(M,{"current-page":f.page,"onUpdate:currentPage":e[2]||(e[2]=n=>f.page=n),"page-size":f.pageSize,"onUpdate:pageSize":e[3]||(e[3]=n=>f.pageSize=n),total:f.total,"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",onSizeChange:B,onCurrentChange:D,style:{"margin-top":"20px","justify-content":"flex-end"}},null,8,["current-page","page-size","total"])]),_:1}),l(F,{modelValue:v.value,"onUpdate:modelValue":e[5]||(e[5]=n=>v.value=n),title:"用户详情",width:"600px"},{footer:t(()=>[l(b,{onClick:e[4]||(e[4]=n=>v.value=!1)},{default:t(()=>[...e[18]||(e[18]=[a("关闭",-1)])]),_:1})]),default:t(()=>[i.value?(u(),p(O,{key:0,column:2,border:""},{default:t(()=>[l(r,{label:"ID"},{default:t(()=>[a(s(i.value.id),1)]),_:1}),l(r,{label:"手机号"},{default:t(()=>[a(s(i.value.phone),1)]),_:1}),l(r,{label:"昵称"},{default:t(()=>[a(s(i.value.nickname),1)]),_:1}),l(r,{label:"真实姓名"},{default:t(()=>[a(s(i.value.realName||"未认证"),1)]),_:1}),l(r,{label:"会员等级"},{default:t(()=>[a(s(i.value.memberLevel),1)]),_:1}),l(r,{label:"成长值"},{default:t(()=>[a(s(i.value.growthValue),1)]),_:1}),l(r,{label:"总积分"},{default:t(()=>[a(s(i.value.totalPoints),1)]),_:1}),l(r,{label:"可用积分"},{default:t(()=>[a(s(i.value.availablePoints),1)]),_:1}),l(r,{label:"钱包余额"},{default:t(()=>[a("¥"+s(i.value.walletBalance),1)]),_:1}),l(r,{label:"状态"},{default:t(()=>[a(s(i.value.status),1)]),_:1}),l(r,{label:"注册时间",span:2},{default:t(()=>[a(s(i.value.registerTime),1)]),_:1}),l(r,{label:"最后登录",span:2},{default:t(()=>[a(s(i.value.lastLoginTime),1)]),_:1})]),_:1})):ee("",!0)]),_:1},8,["modelValue"])])}}},ue=K(ne,[["__scopeId","data-v-10972212"]]);export{ue as default};

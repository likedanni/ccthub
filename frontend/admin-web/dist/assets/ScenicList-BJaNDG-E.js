import{r as ue}from"./request-Cl0XkbGx.js";import{g as ge,u as we,c as Ce,a as Ie,b as xe,d as Se}from"./scenic-CIuNjVab.js";import{r as w,h as ie,d as g,i as _e,j as be,c as C,o as p,k as U,l as X,w as l,b as e,f as d,t as v,F as B,n as M,g as O,E as k,_ as ye,a as ne,p as ce,q as K,m as pe}from"./index-BxrhVYt3.js";const Ae=()=>ue({url:"/regions/provinces",method:"get"}),se=c=>ue({url:"/regions/cities",method:"get",params:{provinceCode:c}}),me=c=>ue({url:"/regions/districts",method:"get",params:{cityCode:c}}),ke={key:0},Ee={key:0},Te={style:{"white-space":"pre-wrap"}},Ne={style:{"white-space":"pre-wrap"}},Ue={style:{"white-space":"pre-wrap"}},ze={style:{"white-space":"pre-wrap"}},De={key:1},$e={key:0,style:{display:"flex","flex-wrap":"wrap",gap:"10px"}},Pe={key:1},Be={__name:"ScenicDetail",props:{scenicId:{type:Number,required:!0}},setup(c){const A=c,E=w(!1),i=w(null),D=async()=>{E.value=!0;try{i.value=await ge(A.scenicId)}catch{k.error("加载详情失败")}finally{E.value=!1}},L=V=>({ACTIVE:"success",INACTIVE:"danger",MAINTENANCE:"warning"})[V]||"info",t=V=>({ACTIVE:"开放",INACTIVE:"关闭",MAINTENANCE:"维护中"})[V]||V,I=V=>V?new Date(V).toLocaleString("zh-CN"):"-";return ie(()=>{D()}),(V,_)=>{const m=g("el-descriptions-item"),T=g("el-tag"),q=g("el-image"),R=g("el-descriptions"),N=_e("loading");return be((p(),C("div",null,[i.value?(p(),U(R,{key:0,column:2,border:""},{default:l(()=>[e(m,{label:"景区ID"},{default:l(()=>[d(v(i.value.id),1)]),_:1}),e(m,{label:"景区名称"},{default:l(()=>[d(v(i.value.name),1)]),_:1}),e(m,{label:"景区等级"},{default:l(()=>[d(v(i.value.level||"-"),1)]),_:1}),e(m,{label:"状态"},{default:l(()=>[e(T,{type:L(i.value.status)},{default:l(()=>[d(v(t(i.value.status)),1)]),_:1},8,["type"])]),_:1}),e(m,{label:"省份"},{default:l(()=>[d(v(i.value.province),1)]),_:1}),e(m,{label:"城市"},{default:l(()=>[d(v(i.value.city),1)]),_:1}),e(m,{label:"区县"},{default:l(()=>[d(v(i.value.district||"-"),1)]),_:1}),e(m,{label:"详细地址"},{default:l(()=>[d(v(i.value.address),1)]),_:1}),e(m,{label:"经度"},{default:l(()=>[d(v(i.value.longitude||"-"),1)]),_:1}),e(m,{label:"纬度"},{default:l(()=>[d(v(i.value.latitude||"-"),1)]),_:1}),e(m,{label:"开放时间"},{default:l(()=>[d(v(i.value.openingHours||"-"),1)]),_:1}),e(m,{label:"联系电话"},{default:l(()=>[d(v(i.value.contactPhone||"-"),1)]),_:1}),e(m,{label:"浏览次数"},{default:l(()=>[d(v(i.value.viewCount),1)]),_:1}),e(m,{label:"创建时间"},{default:l(()=>[d(v(I(i.value.createTime)),1)]),_:1}),e(m,{label:"景区标签",span:2},{default:l(()=>[(p(!0),C(B,null,M(i.value.tags,x=>(p(),U(T,{key:x,style:{"margin-right":"5px"}},{default:l(()=>[d(v(x),1)]),_:2},1024))),128)),!i.value.tags||i.value.tags.length===0?(p(),C("span",ke,"-")):X("",!0)]),_:1}),e(m,{label:"景区设施",span:2},{default:l(()=>[(p(!0),C(B,null,M(i.value.facilities,x=>(p(),U(T,{key:x,type:"success",style:{"margin-right":"5px"}},{default:l(()=>[d(v(x),1)]),_:2},1024))),128)),!i.value.facilities||i.value.facilities.length===0?(p(),C("span",Ee,"-")):X("",!0)]),_:1}),e(m,{label:"景区介绍",span:2},{default:l(()=>[O("div",Te,v(i.value.introduction||"-"),1)]),_:1}),e(m,{label:"门票信息",span:2},{default:l(()=>[O("div",Ne,v(i.value.ticketInfo||"-"),1)]),_:1}),e(m,{label:"交通信息",span:2},{default:l(()=>[O("div",Ue,v(i.value.trafficInfo||"-"),1)]),_:1}),e(m,{label:"游玩须知",span:2},{default:l(()=>[O("div",ze,v(i.value.notice||"-"),1)]),_:1}),e(m,{label:"封面图片",span:2},{default:l(()=>[i.value.coverImage?(p(),U(q,{key:0,src:i.value.coverImage,style:{width:"200px",height:"150px"},fit:"cover","preview-src-list":[i.value.coverImage]},null,8,["src","preview-src-list"])):(p(),C("span",De,"-"))]),_:1}),e(m,{label:"景区图册",span:2},{default:l(()=>[i.value.images&&i.value.images.length>0?(p(),C("div",$e,[(p(!0),C(B,null,M(i.value.images,(x,j)=>(p(),U(q,{key:j,src:x,style:{width:"120px",height:"90px"},fit:"cover","preview-src-list":i.value.images,"initial-index":j},null,8,["src","preview-src-list","initial-index"]))),128))])):(p(),C("span",Pe,"-"))]),_:1})]),_:1})):X("",!0)])),[[N,E.value]])}}},Me=5*1024*1024;function Le(c){return c.type&&c.type.startsWith("image/")?c.size<=Me?!0:(console.warn("图片大小不能超过 5MB"),!1):(console.warn("请上传图片文件"),!1)}function fe(c){try{const A=typeof c=="function"?c():c;return{Authorization:A?`Bearer ${A}`:""}}catch{return{Authorization:""}}}function Q(c){if(!c)return null;if(typeof c=="string")try{const A=JSON.parse(c);return Q(A)}catch{return c}if(c.data){if(typeof c.data=="string")try{const A=JSON.parse(c.data);return Q(A)}catch{return c.data}if(c.data.url)return c.data.url}return c.url?c.url:c.code&&c.data&&typeof c.data=="object"&&c.data.url?c.data.url:null}function ve(){return"/api/files/upload"}const Fe={key:0,style:{"margin-bottom":"10px"}},Oe={style:{display:"flex","flex-wrap":"wrap",gap:"10px"}},je={__name:"ScenicForm",props:{formData:Object,isEdit:Boolean},emits:["submit","cancel"],setup(c,{emit:A}){const E=c,i=A,D=w(),L=w(!1),t=ne({name:"",level:"",introduction:"",province:"",city:"",district:"",address:"",longitude:null,latitude:null,openingHours:"",contactPhone:"",coverImage:"",images:[],tags:[],facilities:[],ticketInfo:"",trafficInfo:"",notice:"",status:"ACTIVE"}),I=w([]),V=w([]),_=w([]),m=w(""),T=w(""),q={name:[{required:!0,message:"请输入景区名称",trigger:"blur"}],province:[{required:!0,message:"请选择省份",trigger:"change"}],city:[{required:!0,message:"请选择城市",trigger:"change"}],address:[{required:!0,message:"请输入详细地址",trigger:"blur"}]},R=async()=>{try{const s=await Ae();I.value=s}catch(s){console.error("加载省份列表失败",s)}},N=async s=>{const a=s||E.formData||t;if(a)try{if(a.province&&I.value.length>0){const b=I.value.find(y=>y.name===a.province);if(b){m.value=b.code;const y=await se(b.code);if(V.value=y,a.city){const S=y.find(f=>f.name===a.city);if(S){T.value=S.code;const f=await me(S.code);_.value=f}}}}}catch(b){console.error("回填省市区失败",b)}},x=async s=>{if(T.value="",t.city="",t.district="",V.value=[],_.value=[],s){const a=I.value.find(b=>b.code===s);t.province=a?a.name:"";try{const b=await se(s);V.value=b}catch(b){console.error("加载城市列表失败",b)}}else t.province=""},j=async s=>{if(t.district="",_.value=[],s){const a=V.value.find(b=>b.code===s);t.city=a?a.name:"";try{const b=await me(s);_.value=b}catch(b){console.error("加载区县列表失败",b)}}else t.city=""},Y=()=>{t.name="",t.level="",t.introduction="",t.province="",t.city="",t.district="",t.address="",t.longitude=null,t.latitude=null,t.openingHours="",t.contactPhone="",t.coverImage="",t.images=[],t.tags=[],t.facilities=[],t.ticketInfo="",t.trafficInfo="",t.notice="",t.status="ACTIVE",m.value="",T.value="",V.value=[],_.value=[],D.value&&D.value.clearValidate&&D.value.clearValidate()};ce(()=>E.formData,async s=>{if(console.debug("ScenicForm watch triggered, formData id:",s&&s.id,"provinces loaded:",I.value&&I.value.length),!s){Y();return}Object.assign(t,{...s,images:s.images||[],tags:s.tags||[],facilities:s.facilities||[]}),await N(s)},{immediate:!0});const Z=()=>localStorage.getItem("token")||"",G=s=>{const a=Le(s);return a||k.error("请上传图片文件且大小不超过 5MB"),a},ee=s=>{console.debug("handleCoverSuccess response:",s);const a=Q(s);a?(t.coverImage=a,k.success("上传成功")):(console.warn("unexpected upload response",s),k.error("上传失败"))},le=s=>{console.debug("handleImageSuccess response:",s);const a=Q(s);a?(t.images||(t.images=[]),t.images.push(a),k.success("上传成功")):(console.warn("unexpected upload response",s),k.error("上传失败"))},te=s=>{t.images.splice(s,1)},ae=async()=>{try{if(await D.value.validate(),L.value=!0,console.debug("Submitting scenic form, isEdit:",E.isEdit,"payload:",JSON.parse(JSON.stringify(t))),E.isEdit){const s=await we(E.formData.id,t);console.debug("updateScenicSpot response:",s),k.success("更新成功")}else{const s=await Ce(t);console.debug("createScenicSpot response:",s),k.success("创建成功")}i("submit")}catch(s){s!==!1&&k.error("操作失败")}finally{L.value=!1}};return ie(()=>{R()}),ce(I,async s=>{s&&s.length>0&&await N(E.formData||t)}),(s,a)=>{const b=g("el-input"),y=g("el-form-item"),S=g("el-col"),f=g("el-option"),r=g("el-select"),o=g("el-row"),h=g("el-input-number"),H=g("el-image"),$=g("el-button"),z=g("el-upload"),F=g("el-radio"),oe=g("el-radio-group"),P=g("el-form");return p(),U(P,{ref_key:"formRef",ref:D,model:t,rules:q,"label-width":"120px"},{default:l(()=>[e(o,{gutter:20},{default:l(()=>[e(S,{span:12},{default:l(()=>[e(y,{label:"景区名称",prop:"name"},{default:l(()=>[e(b,{modelValue:t.name,"onUpdate:modelValue":a[0]||(a[0]=n=>t.name=n),placeholder:"请输入景区名称"},null,8,["modelValue"])]),_:1})]),_:1}),e(S,{span:12},{default:l(()=>[e(y,{label:"景区等级",prop:"level"},{default:l(()=>[e(r,{modelValue:t.level,"onUpdate:modelValue":a[1]||(a[1]=n=>t.level=n),placeholder:"请选择等级"},{default:l(()=>[e(f,{label:"A级",value:"A"}),e(f,{label:"AA级",value:"AA"}),e(f,{label:"AAA级",value:"AAA"}),e(f,{label:"AAAA级",value:"AAAA"}),e(f,{label:"AAAAA级(5A)",value:"AAAAA"})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(o,{gutter:20},{default:l(()=>[e(S,{span:8},{default:l(()=>[e(y,{label:"省份",prop:"province"},{default:l(()=>[e(r,{modelValue:m.value,"onUpdate:modelValue":a[2]||(a[2]=n=>m.value=n),placeholder:"请选择省份",onChange:x,style:{width:"100%"}},{default:l(()=>[(p(!0),C(B,null,M(I.value,n=>(p(),U(f,{key:n.code,label:n.name,value:n.code},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(S,{span:8},{default:l(()=>[e(y,{label:"城市",prop:"city"},{default:l(()=>[e(r,{modelValue:T.value,"onUpdate:modelValue":a[3]||(a[3]=n=>T.value=n),placeholder:"请选择城市",disabled:!m.value,onChange:j,style:{width:"100%"}},{default:l(()=>[(p(!0),C(B,null,M(V.value,n=>(p(),U(f,{key:n.code,label:n.name,value:n.code},null,8,["label","value"]))),128))]),_:1},8,["modelValue","disabled"])]),_:1})]),_:1}),e(S,{span:8},{default:l(()=>[e(y,{label:"区县",prop:"district"},{default:l(()=>[e(r,{modelValue:t.district,"onUpdate:modelValue":a[4]||(a[4]=n=>t.district=n),placeholder:"请选择区县",disabled:!T.value,style:{width:"100%"}},{default:l(()=>[(p(!0),C(B,null,M(_.value,n=>(p(),U(f,{key:n.code,label:n.name,value:n.name},null,8,["label","value"]))),128))]),_:1},8,["modelValue","disabled"])]),_:1})]),_:1})]),_:1}),e(y,{label:"详细地址",prop:"address"},{default:l(()=>[e(b,{modelValue:t.address,"onUpdate:modelValue":a[5]||(a[5]=n=>t.address=n),placeholder:"请输入详细地址"},null,8,["modelValue"])]),_:1}),e(o,{gutter:20},{default:l(()=>[e(S,{span:12},{default:l(()=>[e(y,{label:"经度",prop:"longitude"},{default:l(()=>[e(h,{modelValue:t.longitude,"onUpdate:modelValue":a[6]||(a[6]=n=>t.longitude=n),precision:6,step:1e-6,placeholder:"请输入经度"},null,8,["modelValue"])]),_:1})]),_:1}),e(S,{span:12},{default:l(()=>[e(y,{label:"纬度",prop:"latitude"},{default:l(()=>[e(h,{modelValue:t.latitude,"onUpdate:modelValue":a[7]||(a[7]=n=>t.latitude=n),precision:6,step:1e-6,placeholder:"请输入纬度"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(o,{gutter:20},{default:l(()=>[e(S,{span:12},{default:l(()=>[e(y,{label:"开放时间",prop:"openingHours"},{default:l(()=>[e(b,{modelValue:t.openingHours,"onUpdate:modelValue":a[8]||(a[8]=n=>t.openingHours=n),placeholder:"如: 08:00-18:00"},null,8,["modelValue"])]),_:1})]),_:1}),e(S,{span:12},{default:l(()=>[e(y,{label:"联系电话",prop:"contactPhone"},{default:l(()=>[e(b,{modelValue:t.contactPhone,"onUpdate:modelValue":a[9]||(a[9]=n=>t.contactPhone=n),placeholder:"请输入联系电话"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(y,{label:"景区介绍",prop:"introduction"},{default:l(()=>[e(b,{modelValue:t.introduction,"onUpdate:modelValue":a[10]||(a[10]=n=>t.introduction=n),type:"textarea",rows:4,placeholder:"请输入景区介绍"},null,8,["modelValue"])]),_:1}),e(y,{label:"门票信息",prop:"ticketInfo"},{default:l(()=>[e(b,{modelValue:t.ticketInfo,"onUpdate:modelValue":a[11]||(a[11]=n=>t.ticketInfo=n),type:"textarea",rows:3,placeholder:"请输入门票信息"},null,8,["modelValue"])]),_:1}),e(y,{label:"交通信息",prop:"trafficInfo"},{default:l(()=>[e(b,{modelValue:t.trafficInfo,"onUpdate:modelValue":a[12]||(a[12]=n=>t.trafficInfo=n),type:"textarea",rows:3,placeholder:"请输入交通信息"},null,8,["modelValue"])]),_:1}),e(y,{label:"游玩须知",prop:"notice"},{default:l(()=>[e(b,{modelValue:t.notice,"onUpdate:modelValue":a[13]||(a[13]=n=>t.notice=n),type:"textarea",rows:3,placeholder:"请输入游玩须知"},null,8,["modelValue"])]),_:1}),e(y,{label:"景区标签",prop:"tags"},{default:l(()=>[e(r,{modelValue:t.tags,"onUpdate:modelValue":a[14]||(a[14]=n=>t.tags=n),multiple:"",filterable:"","allow-create":"",placeholder:"请选择或输入标签",style:{width:"100%"}},{default:l(()=>[e(f,{label:"自然风光",value:"自然风光"}),e(f,{label:"文化古迹",value:"文化古迹"}),e(f,{label:"红色旅游",value:"红色旅游"}),e(f,{label:"峡谷",value:"峡谷"}),e(f,{label:"山水",value:"山水"}),e(f,{label:"徒步",value:"徒步"}),e(f,{label:"历史文化",value:"历史文化"}),e(f,{label:"爱国教育",value:"爱国教育"})]),_:1},8,["modelValue"])]),_:1}),e(y,{label:"景区设施",prop:"facilities"},{default:l(()=>[e(r,{modelValue:t.facilities,"onUpdate:modelValue":a[15]||(a[15]=n=>t.facilities=n),multiple:"",filterable:"","allow-create":"",placeholder:"请选择或输入设施",style:{width:"100%"}},{default:l(()=>[e(f,{label:"停车场",value:"停车场"}),e(f,{label:"游客中心",value:"游客中心"}),e(f,{label:"餐厅",value:"餐厅"}),e(f,{label:"卫生间",value:"卫生间"}),e(f,{label:"观光车",value:"观光车"}),e(f,{label:"索道",value:"索道"}),e(f,{label:"游船",value:"游船"}),e(f,{label:"纪念品商店",value:"纪念品商店"})]),_:1},8,["modelValue"])]),_:1}),e(y,{label:"封面图片",prop:"coverImage"},{default:l(()=>[t.coverImage?(p(),C("div",Fe,[e(H,{src:t.coverImage,"preview-src-list":[t.coverImage],style:{width:"200px",height:"150px"},fit:"cover"},null,8,["src","preview-src-list"])])):X("",!0),e(z,{action:K(ve)(),data:{category:"scenic"},"show-file-list":!1,"on-success":ee,headers:K(fe)(Z),accept:"image/*","before-upload":G},{default:l(()=>[e($,{size:"small",type:"primary"},{default:l(()=>[d(v(t.coverImage?"更换封面":"上传封面"),1)]),_:1})]),_:1},8,["action","headers"])]),_:1}),e(y,{label:"景区图册",prop:"images"},{default:l(()=>[O("div",Oe,[(p(!0),C(B,null,M(t.images,(n,W)=>(p(),C("div",{key:W,style:{position:"relative"}},[e(H,{src:n,"preview-src-list":t.images,"initial-index":W,style:{width:"100px",height:"100px"},fit:"cover"},null,8,["src","preview-src-list","initial-index"]),e($,{size:"small",type:"danger",circle:"",onClick:re=>te(W),style:{position:"absolute",top:"-10px",right:"-10px"}},{default:l(()=>[...a[18]||(a[18]=[d(" × ",-1)])]),_:1},8,["onClick"])]))),128))]),e(z,{action:K(ve)(),data:{category:"scenic"},"show-file-list":!1,"on-success":le,headers:K(fe)(Z),accept:"image/*","before-upload":G,style:{"margin-top":"10px"}},{default:l(()=>[e($,{size:"small",type:"primary"},{default:l(()=>[...a[19]||(a[19]=[d("添加图片",-1)])]),_:1})]),_:1},8,["action","headers"])]),_:1}),e(y,{label:"状态",prop:"status"},{default:l(()=>[e(oe,{modelValue:t.status,"onUpdate:modelValue":a[16]||(a[16]=n=>t.status=n)},{default:l(()=>[e(F,{label:"ACTIVE"},{default:l(()=>[...a[20]||(a[20]=[d("开放",-1)])]),_:1}),e(F,{label:"INACTIVE"},{default:l(()=>[...a[21]||(a[21]=[d("关闭",-1)])]),_:1}),e(F,{label:"MAINTENANCE"},{default:l(()=>[...a[22]||(a[22]=[d("维护中",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(y,null,{default:l(()=>[e($,{type:"primary",onClick:ae,loading:L.value},{default:l(()=>[...a[23]||(a[23]=[d(" 提交 ",-1)])]),_:1},8,["loading"]),e($,{onClick:a[17]||(a[17]=n=>s.$emit("cancel"))},{default:l(()=>[...a[24]||(a[24]=[d("取消",-1)])]),_:1})]),_:1})]),_:1},8,["model"])}}},qe=ye(je,[["__scopeId","data-v-d5ce7a9c"]]),He={class:"scenic-list-container"},Je={class:"card-header"},Re={style:{display:"grid","grid-template-columns":"repeat(3, 1fr)",gap:"5px"}},We={__name:"ScenicList",setup(c){const A=w(!1),E=w([]),i=w(!1),D=w(!1),L=w(""),t=w(!1),I=w(null),V=w(null),_=ne({name:"",provinceCode:"",province:"",city:"",level:"",status:""}),m=w([]),T=w([]),q=async()=>{try{const r=await Ae();m.value=r}catch(r){console.error("加载省份列表失败",r)}},R=async r=>{if(_.city="",T.value=[],r){const o=m.value.find(h=>h.code===r);_.province=o?o.name:"";try{const h=await se(r);T.value=h}catch(h){console.error("加载城市列表失败",h)}}else _.province=""},N=ne({page:1,pageSize:10,total:0}),x=async()=>{A.value=!0;try{const r={page:N.page-1,pageSize:N.pageSize,..._},o=await Ie(r);E.value=o.content,N.total=o.total}catch{k.error("加载数据失败")}finally{A.value=!1}},j=()=>{N.page=1,x()},Y=()=>{Object.keys(_).forEach(r=>{_[r]=""}),j()},Z=()=>{L.value="新增景区",t.value=!1,I.value=null,i.value=!0},G=async r=>{L.value="编辑景区",t.value=!0,console.debug("handleEdit invoked, row id:",r&&r.id);try{A.value=!0;const o=await ge(r.id);I.value=JSON.parse(JSON.stringify(o)),console.debug("currentRow loaded detail id:",I.value&&I.value.id),i.value=!0}catch(o){console.error("加载景区详情失败",o),k.error("加载详情失败")}finally{A.value=!1}},ee=r=>{V.value=r.id,D.value=!0},le=async r=>{const o=r.status==="ACTIVE"?"INACTIVE":"ACTIVE",h=o==="ACTIVE"?"开放":"关闭";try{await pe.confirm(`确定要${h}景区"${r.name}"吗？`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),await xe(r.id,o),k.success(`${h}成功`),x()}catch(H){H!=="cancel"&&k.error("操作失败")}},te=async r=>{try{await pe.confirm(`确定要删除景区"${r.name}"吗？此操作不可恢复！`,"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"error"}),await Se(r.id),k.success("删除成功"),x()}catch(o){o!=="cancel"&&k.error("删除失败")}},ae=()=>{i.value=!1,x()},s=()=>{I.value=null},a=()=>{x()},b=()=>{x()},y=r=>({ACTIVE:"success",INACTIVE:"danger",MAINTENANCE:"warning"})[r]||"info",S=r=>({ACTIVE:"开放",INACTIVE:"关闭",MAINTENANCE:"维护中"})[r]||r,f=r=>r?new Date(r).toLocaleString("zh-CN"):"-";return ie(()=>{q(),x()}),(r,o)=>{const h=g("el-button"),H=g("el-input"),$=g("el-form-item"),z=g("el-option"),F=g("el-select"),oe=g("el-form"),P=g("el-table-column"),n=g("el-tag"),W=g("el-table"),re=g("el-pagination"),Ve=g("el-card"),de=g("el-dialog"),he=_e("loading");return p(),C("div",He,[e(Ve,null,{header:l(()=>[O("div",Je,[o[11]||(o[11]=O("span",null,"景区管理",-1)),e(h,{type:"primary",onClick:Z},{default:l(()=>[...o[10]||(o[10]=[d("新增景区",-1)])]),_:1})])]),default:l(()=>[e(oe,{inline:!0,model:_,class:"search-form"},{default:l(()=>[e($,{label:"景区名称"},{default:l(()=>[e(H,{modelValue:_.name,"onUpdate:modelValue":o[0]||(o[0]=u=>_.name=u),placeholder:"请输入景区名称",clearable:""},null,8,["modelValue"])]),_:1}),e($,{label:"省份",style:{width:"240px"}},{default:l(()=>[e(F,{modelValue:_.provinceCode,"onUpdate:modelValue":o[1]||(o[1]=u=>_.provinceCode=u),placeholder:"请选择省份",clearable:"",onChange:R,style:{width:"100%"}},{default:l(()=>[(p(!0),C(B,null,M(m.value,u=>(p(),U(z,{key:u.code,label:u.name,value:u.code},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e($,{label:"城市",style:{width:"220px"}},{default:l(()=>[e(F,{modelValue:_.city,"onUpdate:modelValue":o[2]||(o[2]=u=>_.city=u),placeholder:"请选择城市",clearable:"",disabled:!_.provinceCode,style:{width:"100%"}},{default:l(()=>[(p(!0),C(B,null,M(T.value,u=>(p(),U(z,{key:u.code,label:u.name,value:u.name},null,8,["label","value"]))),128))]),_:1},8,["modelValue","disabled"])]),_:1}),e($,{label:"等级"},{default:l(()=>[e(F,{modelValue:_.level,"onUpdate:modelValue":o[3]||(o[3]=u=>_.level=u),placeholder:"请选择等级",clearable:"",style:{width:"150px"}},{default:l(()=>[e(z,{label:"AAAAA",value:"AAAAA"}),e(z,{label:"AAAA",value:"AAAA"}),e(z,{label:"AAA",value:"AAA"}),e(z,{label:"AA",value:"AA"}),e(z,{label:"A",value:"A"})]),_:1},8,["modelValue"])]),_:1}),e($,{label:"状态"},{default:l(()=>[e(F,{modelValue:_.status,"onUpdate:modelValue":o[4]||(o[4]=u=>_.status=u),placeholder:"请选择状态",clearable:"",style:{width:"150px"}},{default:l(()=>[e(z,{label:"开放",value:"ACTIVE"}),e(z,{label:"关闭",value:"INACTIVE"}),e(z,{label:"维护中",value:"MAINTENANCE"})]),_:1},8,["modelValue"])]),_:1}),e($,null,{default:l(()=>[e(h,{type:"primary",onClick:j},{default:l(()=>[...o[12]||(o[12]=[d("搜索",-1)])]),_:1}),e(h,{onClick:Y},{default:l(()=>[...o[13]||(o[13]=[d("重置",-1)])]),_:1})]),_:1})]),_:1},8,["model"]),be((p(),U(W,{data:E.value,style:{width:"100%"}},{default:l(()=>[e(P,{prop:"id",label:"ID",width:"80"}),e(P,{prop:"name",label:"景区名称",width:"200"}),e(P,{prop:"level",label:"等级",width:"100"}),e(P,{label:"地址",width:"300"},{default:l(({row:u})=>[d(v(u.province)+" "+v(u.city)+" "+v(u.district)+" "+v(u.address),1)]),_:1}),e(P,{label:"标签",width:"200"},{default:l(({row:u})=>[(p(!0),C(B,null,M(u.tags,J=>(p(),U(n,{key:J,size:"small",style:{"margin-right":"5px"}},{default:l(()=>[d(v(J),1)]),_:2},1024))),128))]),_:1}),e(P,{label:"状态",width:"100"},{default:l(({row:u})=>[e(n,{type:y(u.status)},{default:l(()=>[d(v(S(u.status)),1)]),_:2},1032,["type"])]),_:1}),e(P,{prop:"viewCount",label:"浏览次数",width:"100"}),e(P,{label:"创建时间",width:"180"},{default:l(({row:u})=>[d(v(f(u.createTime)),1)]),_:1}),e(P,{label:"操作",width:"280",fixed:"right"},{default:l(({row:u})=>[O("div",Re,[e(h,{size:"small",onClick:J=>ee(u)},{default:l(()=>[...o[14]||(o[14]=[d("查看",-1)])]),_:1},8,["onClick"]),e(h,{size:"small",type:"primary",onClick:J=>G(u)},{default:l(()=>[...o[15]||(o[15]=[d(" 编辑 ",-1)])]),_:1},8,["onClick"]),e(h,{size:"small",type:u.status==="ACTIVE"?"warning":"success",onClick:J=>le(u)},{default:l(()=>[d(v(u.status==="ACTIVE"?"关闭":"开放"),1)]),_:2},1032,["type","onClick"]),e(h,{size:"small",type:"danger",onClick:J=>te(u)},{default:l(()=>[...o[16]||(o[16]=[d(" 删除 ",-1)])]),_:1},8,["onClick"])])]),_:1})]),_:1},8,["data"])),[[he,A.value]]),e(re,{"current-page":N.page,"onUpdate:currentPage":o[5]||(o[5]=u=>N.page=u),"page-size":N.pageSize,"onUpdate:pageSize":o[6]||(o[6]=u=>N.pageSize=u),"page-sizes":[10,20,50,100],total:N.total,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:a,onCurrentChange:b,style:{"margin-top":"20px","justify-content":"flex-end"}},null,8,["current-page","page-size","total"])]),_:1}),e(de,{modelValue:i.value,"onUpdate:modelValue":o[8]||(o[8]=u=>i.value=u),title:L.value,width:"800px",onClose:s},{default:l(()=>[e(qe,{"form-data":I.value,"is-edit":t.value,onSubmit:ae,onCancel:o[7]||(o[7]=u=>i.value=!1)},null,8,["form-data","is-edit"])]),_:1},8,["modelValue","title"]),e(de,{modelValue:D.value,"onUpdate:modelValue":o[9]||(o[9]=u=>D.value=u),title:"景区详情",width:"900px"},{default:l(()=>[D.value?(p(),U(Be,{key:0,"scenic-id":V.value},null,8,["scenic-id"])):X("",!0)]),_:1},8,["modelValue"])])}}},Ke=ye(We,[["__scopeId","data-v-dd883ee3"]]);export{Ke as default};
